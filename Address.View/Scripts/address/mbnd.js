document.write("<style>.linkonmap {-moz-border-radius:3px 3px 3px 3px;background-color:#D50000;border:1px solid #AAAAAA;margin-top:20px;opacity:0.6;padding:6px;position:absolute;text-align:center;top:0;}.linkonmap a.LinkViewGallery {color:#FFFFFF;}#divPlgDescWdgMbnd {background-color:#555555;border:1px solid #333333;bottom:0;color:white;font-family:Verdana,arial;font-size:small;font-weight:bold;opacity:0.9;padding:0 5px;position:absolute;z-index:10001;}#ctrmbnd_copyright{background-color:#FFFFFF;line-height:13px;padding:3px 0;text-align:center;width:158px;filter:alpha(opacity=85);-moz-opacity:0.55;opacity:0.55;border:1px solid #AAA;border-left:0;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:6px;border-radius-topright:6px;border-radius-bottomright:6px;-webkit-border-radius-topright:6px;-webkit-border-radius-bottomright:6px;-moz-user-select: none; z-index: 1; position: absolute; left: 0pt; bottom: 38px;}#ctrmbnd_copyright a{font-size:11px;text-decoration:none;color:#D50000;}#ctrmbnd_copyright img {margin-left:3px;margin-right:-2px;border:1px solid #CCC;}#copyright_map{text-align:center;}.biendongwdgmbnd{color: white;    font-size: 15px;    font-weight: bold;    width: 100px;}</style>"); var _haveLogo_wdgMbnd = "0"; var _leftPos_wdgMbnd = 20; var _maptypeDefault_wdgMbnd = ""; var plgrgLinkWidgetMbnd = "http://bandonhadat.vn/?lat=21.0329733&lng=105.834024&lvdf=10&plg=sb_241"; var plgrgWidgetMbnd = { l: [{ s1: '21.0518398,105.849609,21.0424938,105.856231,21.0386219,105.844497,21.0302028,105.843940,21.0286827,105.842117,21.0283946,105.839782,21.0312938,105.832672,21.0302524,105.829757,21.0314235,105.830093,21.0320148,105.828819,21.0235729,105.819862,21.0231361,105.821029,21.0188846,105.818923,21.0161266,105.815994,21.0187187,105.810592,21.0214729,105.811721,21.0247516,105.811256,21.0291576,105.801406,21.0369739,105.806289,21.0401382,105.807029,21.0473747,105.805992,21.0464057,105.810447,21.0426673,105.815261,21.0395908,105.827987,21.0415401,105.830642,21.0416965,105.836029,21.0466613,105.836814,21.0501117,105.839462,21.0486125,105.842247,21.0535888,105.848495,21.0518398,105.849609', s2: 'TP.Hà Nội/ Q.Ba Đình', s3: '241' }] }; var _pFile_wdgMbnd = "http://uploads.videonhadat.com.vn"; var COLOR_PLG = [{ id: "1", clr: "#F15F66" }, { id: "1", clr: "#F1965F" }, { id: "1", clr: "#FFBA51" }, { id: "1", clr: "#74DCA8" }, { id: "1", clr: "#BAEDED" }, { id: "1", clr: "#74A8DC" }, { id: "1", clr: "#51A9FF" }, { id: "1", clr: "#F7CFD6" }, { id: "1", clr: "#F1D15F" }, { id: "1", clr: "#FFFA51" }, { id: "1", clr: "#5F51FF" }, { id: "1", clr: "#BFD9E7" }, { id: "1", clr: "#7EB033" }, { id: "1", clr: "#74DC77" }, { id: "1", clr: "#6E2286" }, { id: "1", clr: "#FFBAA8" }, { id: "1", clr: "#90C0BE" }, { id: "1", clr: "#90AFC0" }, { id: "1", clr: "#4491BB" }, { id: "1", clr: "#909DC0" }, { id: "1", clr: "#A7DC74" }, { id: "1", clr: "#7DFF00" }, { id: "1", clr: "#57CB33" }, { id: "1", clr: "#CFBD59" }, { id: "1", clr: "#51CFFF" }, { id: "1", clr: "#1A8AC9" }, { id: "1", clr: "#D9C2E4" }, { id: "1", clr: "#961ECC" }, { id: "1", clr: "#E16DE3" }, { id: "1", clr: "#D6298A" }, { id: "1", clr: "#745DA1" }, { id: "1", clr: "#6C46B8" }, { id: "1", clr: "#5DA19F" }, { id: "1", clr: "#46C7B5" }, { id: "1", clr: "#4693B8" }, { id: "1", clr: "#F27A90" }, { id: "1", clr: "#FFD4F7" }, { id: "1", clr: "#E769B4" }, { id: "1", clr: "#FF96A9" }, { id: "1", clr: "#FF00B0" }, { id: "1", clr: "#E77B69" }, { id: "1", clr: "#FF6951" }, { id: "1", clr: "#74A8DC" }, { id: "1", clr: "#0082FF" }, { id: "1", clr: "#BEBAED" }, { id: "1", clr: "#4033CB" }, { id: "1", clr: "#858CE8" }, { id: "1", clr: "#96BAFF" }, { id: "1", clr: "#BD8F9E" }, { id: "1", clr: "#A174DC" }, { id: "1", clr: "#7433CB" }, { id: "1", clr: "#CDA8FF" }, { id: "1", clr: "#F4AFB3" }, { id: "1", clr: "#F1D48F" }, { id: "1", clr: "#FBE6FF" }, { id: "1", clr: "#FF9A00" }, { id: "1", clr: "#BAEDD3" }, { id: "1", clr: "#33CBCB" }, { id: "1", clr: "#4464BB" }, { id: "1", clr: "#80D0CD" }, { id: "1", clr: "#C7CEDF" }, { id: "1", clr: "#BFCAE7" }, { id: "1", clr: "#8095D0" }, { id: "1", clr: "#D3EDBA" }, { id: "1", clr: "#FF000B" }, { id: "1", clr: "#00FFFF" }]; var NVG_PolygonRanhGioi_WdgMbnd = { map: null, LoadMap: function () { if (GBrowserIsCompatible()) { NVG_PolygonRanhGioi_WdgMbnd.map = new GMap2(document.getElementById('container_wdgmbnd')); NVG_PolygonRanhGioi_WdgMbnd.map.disableScrollWheelZoom(); NVG_PolygonRanhGioi_WdgMbnd.map.addControl(new GLargeMapControl3D());/*NVG_PolygonRanhGioi_WdgMbnd.map.addControl(new GOverviewMapControl());*/NVG_PolygonRanhGioi_WdgMbnd.map.addControl(new GScaleControl()); NVG_PolygonRanhGioi_WdgMbnd.map.addControl(new GMapTypeControl()); switch (_maptypeDefault_wdgMbnd) { case "2": NVG_PolygonRanhGioi_WdgMbnd.map.setMapType(G_SATELLITE_MAP); break; case "3": NVG_PolygonRanhGioi_WdgMbnd.map.setMapType(G_HYBRID_MAP); break; default: break; } var divLinkMapWdgMbnd = document.createElement("div"); divLinkMapWdgMbnd.className = "linkonmap"; divLinkMapWdgMbnd.style.left = _leftPos_wdgMbnd + "%"; var aLinkMapWdgMbnd = document.createElement("a"); aLinkMapWdgMbnd.href = plgrgLinkWidgetMbnd; aLinkMapWdgMbnd.className = "LinkViewGallery"; aLinkMapWdgMbnd.target = "_blank"; aLinkMapWdgMbnd.innerHTML = "Click để xem toàn bộ bản đồ trực tuyến"; divLinkMapWdgMbnd.appendChild(aLinkMapWdgMbnd); NVG_PolygonRanhGioi_WdgMbnd.map.getContainer().appendChild(divLinkMapWdgMbnd); var divShowDescMapWdgMbnd = document.createElement("div"); divShowDescMapWdgMbnd.id = "divPlgDescWdgMbnd"; divShowDescMapWdgMbnd.style.display = "none"; divShowDescMapWdgMbnd.style.left = _leftPos_wdgMbnd + "%"; NVG_PolygonRanhGioi_WdgMbnd.map.getContainer().appendChild(divShowDescMapWdgMbnd); GEvent.addListener(NVG_PolygonRanhGioi_WdgMbnd.map, "zoomend", function () { NVG_PolygonRanhGioi_WdgMbnd.CheckBienDong(); }); GEvent.addListener(NVG_PolygonRanhGioi_WdgMbnd.map, "dragend", function () { NVG_PolygonRanhGioi_WdgMbnd.CheckBienDong(); }); if (_haveLogo_wdgMbnd != "0") { var divID_mbnd_logo_wdg = document.createElement("div"); divID_mbnd_logo_wdg.id = "ctrmbnd_copyright"; var a_mbnd_logo_wdg = document.createElement("a"); a_mbnd_logo_wdg.href = "http://www.muabannhdat.com.vn"; a_mbnd_logo_wdg.target = "_blank"; a_mbnd_logo_wdg.innerHTML = "<img height=\"24\" width=\"24\" style=\"float: left;\" src=\"http://www.bandonhadat.vn/images/favicon.gif\">Copyright by <b>muabannhadat.com.vn</b>"; divID_mbnd_logo_wdg.appendChild(a_mbnd_logo_wdg); NVG_PolygonRanhGioi_WdgMbnd.map.getContainer().appendChild(divID_mbnd_logo_wdg); } } }, arrPolygonAll: [], polygonAll: null, MakePolygon: function (s1, s2, s3, i) { if (i > 65) i = 0; var sPlgBig = s1; if (s1.indexOf("*#") != -1) { sPlgBig = NVG_PolygonRanhGioi_WdgMbnd.GetMaibPolygon(s1); } var arr_ = []; arr_ = sPlgBig.split(","); var arr_kq = []; for (var j = 0; j < arr_.length; j += 2) { var s = new GLatLng(parseFloat(arr_[j]), parseFloat(arr_[j + 1])); arr_kq.push(s); NVG_PolygonRanhGioi_WdgMbnd.arrPolygonAll.push(s); } var polygon_ = new GPolygon(arr_kq, "black", 1, 0.6, COLOR_PLG[i].clr, 0.2); GEvent.addListener(polygon_, "mouseover", function () { var plgStyle1 = { color: "#f33f00", weight: 5, opacity: 0.3 }; polygon_.setFillStyle(plgStyle1); NVG_PolygonRanhGioi_WdgMbnd.ShowPolygonDesc("divPlgDescWdgMbnd", s2, 1); }); GEvent.addListener(polygon_, "mouseout", function () { var plgStyle2 = { color: COLOR_PLG[i].clr, weight: 5, opacity: 0.2 }; polygon_.setFillStyle(plgStyle2); NVG_PolygonRanhGioi_WdgMbnd.ShowPolygonDesc("divPlgDescWdgMbnd", s2, 0); }); NVG_PolygonRanhGioi_WdgMbnd.map.addOverlay(polygon_); NVG_PolygonRanhGioi_WdgMbnd.polygonAll = new GPolygon(NVG_PolygonRanhGioi_WdgMbnd.arrPolygonAll, "black", 1, 0.6, "#DF3A00", 0.2); var zzz = NVG_PolygonRanhGioi_WdgMbnd.map.getBoundsZoomLevel(NVG_PolygonRanhGioi_WdgMbnd.polygonAll.getBounds()); NVG_PolygonRanhGioi_WdgMbnd.map.setCenter(NVG_PolygonRanhGioi_WdgMbnd.polygonAll.getBounds().getCenter(), zzz); arr_.length = 0; arr_kq.length = 0; }, GetMaibPolygon: function (s1) { var p = s1; var arr_ = arr_ = s1.split("*#"); var max = -1; for (var j = 0; j < arr_.length; j++) { if (max < arr_[j].length) { p = arr_[j]; max = arr_[j].length; } } return p; }, ShowPolygonDesc: function (div, desc_, type_) { document.getElementById(div).innerHTML = desc_; if (type_ == 1) { document.getElementById(div).style.display = "block"; } else { document.getElementById(div).style.display = "none"; } }, ArrMarkerBienDong: [], removeMarkerFromMap: function (ar, map) { for (var i = 0; i < ar.length; i++) { map.removeOverlay(ar[i]); } }, setNullAr: function (ar) { ar.length = 0; }, CheckBienDong: function () { this.Lay4GocBanDo(this.map); if (this.ArrMarkerBienDong.length > 0) { this.removeMarkerFromMap(this.ArrMarkerBienDong, this.map); this.setNullAr(this.ArrMarkerBienDong); } if (this.map.getZoom() < 7) return; var isHaveMarCenter = false; for (var i = 0; i < ArrBienDong.length; i++) { var late = ArrBienDong[i].late; var latw = ArrBienDong[i].latw; var lngw = ArrBienDong[i].lngw; var lnge = ArrBienDong[i].lnge; var title = ArrBienDong[i].ten; var latCen = ArrBienDong[i].center.lat; var lngCen = ArrBienDong[i].center.lng; var boundTile = new GLatLngBounds(new GLatLng(parseFloat(latw), parseFloat(lngw)), new GLatLng(parseFloat(late), parseFloat(lnge))); if ((this.map.getBounds().containsLatLng(new GLatLng(parseFloat(late), parseFloat(lngw))) && this.map.getBounds().containsLatLng(new GLatLng(parseFloat(late), parseFloat(lnge))) && this.map.getBounds().containsLatLng(new GLatLng(parseFloat(latw), parseFloat(lngw))) && this.map.getBounds().containsLatLng(new GLatLng(parseFloat(latw), parseFloat(lnge))))/* hoac tam cac dao nam trong map */ || this.map.getBounds().containsLatLng(new GLatLng(parseFloat(latCen), parseFloat(lngCen)))) {/* ve marker */var latlng = new GLatLng(parseFloat(latCen), parseFloat(lngCen)); this.AddMarBienDong(latlng, title, this.map); } else if ( /* hoac 4 goc map nam trong tile */(boundTile.containsLatLng(new GLatLng(parseFloat(NVG_PolygonRanhGioi_WdgMbnd.latSE), parseFloat(NVG_PolygonRanhGioi_WdgMbnd.lngNW))) && boundTile.containsLatLng(new GLatLng(parseFloat(NVG_PolygonRanhGioi_WdgMbnd.latSE), parseFloat(NVG_PolygonRanhGioi_WdgMbnd.lngSE))) && boundTile.containsLatLng(new GLatLng(parseFloat(NVG_PolygonRanhGioi_WdgMbnd.latNW), parseFloat(NVG_PolygonRanhGioi_WdgMbnd.lngNW))) && boundTile.containsLatLng(new GLatLng(parseFloat(NVG_PolygonRanhGioi_WdgMbnd.latNW), parseFloat(NVG_PolygonRanhGioi_WdgMbnd.lngSE)))) /* && !isHaveMarCenter */) {/* ve marker */var latlng = this.map.getCenter(); this.AddMarBienDong(latlng, title, this.map); break;/* isHaveMarCenter = true; */ } } }, AddMarBienDong: function (latlng, title, map) { var icon = this.newIconCustom("", null, "", null, new GPoint(5, 5), new GPoint(5, 5)); var opts = this.OptLabelMarBienDong(icon, false, title, title, 0, 0, "", "biendongwdgmbnd"); var marker = new LabeledMarker(latlng, opts); map.addOverlay(marker); this.ArrMarkerBienDong.push(marker); }, newIconCustom: function (img, size, imgShadow, sizeShadow, anch, anchInfo) { var icon = new GIcon(); icon.iconAnchor = anch; icon.infoWindowAnchor = anchInfo; icon.image = img; icon.iconSize = size; if (imgShadow != "") icon.shadow = imgShadow; if (sizeShadow != null) icon.shadowSize = sizeShadow; return icon; }, OptLabelMarBienDong: function (icon, click, text, title, w, h, id, cls) { if (id == undefined) id = ""; var opts = { "icon": icon, "clickable": click, "title": title, "labelText": text, "labelClass": cls, "labelOffset": new GSize(w, h), "labelID": id }; return opts; }, Lay4GocBanDo: function (map) { this.latNW = map.getBounds().getNorthEast().lat(); this.latSE = map.getBounds().getSouthWest().lat(); this.lngNW = map.getBounds().getSouthWest().lng(); this.lngSE = map.getBounds().getNorthEast().lng(); }, latNW: '', latSE: '', lngNW: '', lngSE: '', tileLayerOverlay: null, tileLayerOverlay1: null,    /* mien nam*/    tileLayerOverlay11: null,    /* mien trung*/    tileLayerOverlay12: null, arTileOverlay: [], flag1: false, addTileOverlay: function (map, tpl, opa) { var overl = null; overl = new GTileLayerOverlay(new GTileLayer(null, null, null, { tileUrlTemplate: tpl, isPng: true, opacity: opa }));        /*arTileOverlay.push(tileLayerOverlay);*/        map.addOverlay(overl); return overl; }, check4GocChoTile: function (map) { this.Lay4GocBanDo(map); if (!this.flag1) { for (var i = 0; i < tile_overlay_0.length; i++) { var late = tile_overlay_0[i].late; var latw = tile_overlay_0[i].latw; var lngw = tile_overlay_0[i].lngw; var lnge = tile_overlay_0[i].lnge; var tileGroup = tile_overlay_0[i].tileGroup; var boundTile = new GLatLngBounds(new GLatLng(parseFloat(latw), parseFloat(lngw)), new GLatLng(parseFloat(late), parseFloat(lnge))); if (map.getBounds().containsLatLng(new GLatLng(parseFloat(late), parseFloat(lngw))) || map.getBounds().containsLatLng(new GLatLng(parseFloat(late), parseFloat(lnge))) || map.getBounds().containsLatLng(new GLatLng(parseFloat(latw), parseFloat(lngw))) || map.getBounds().containsLatLng(new GLatLng(parseFloat(latw), parseFloat(lnge)))                /* hoac 4 goc map nam trong tile */ || boundTile.containsLatLng(new GLatLng(parseFloat(this.latSE), parseFloat(this.lngNW))) || boundTile.containsLatLng(new GLatLng(parseFloat(this.latSE), parseFloat(this.lngSE))) || boundTile.containsLatLng(new GLatLng(parseFloat(this.latNW), parseFloat(this.lngNW))) || boundTile.containsLatLng(new GLatLng(parseFloat(this.latNW), parseFloat(this.lngSE)))                /* hoac cat nhau kieu chu thap */ || (parseFloat(map.getBounds().getNorthEast().lng()) >= parseFloat(lnge) && parseFloat(map.getBounds().getSouthWest().lng()) <= parseFloat(lnge) && parseFloat(map.getBounds().getNorthEast().lat()) <= parseFloat(late) && parseFloat(map.getBounds().getNorthEast().lat()) >= parseFloat(latw)) || (parseFloat(map.getBounds().getNorthEast().lng()) >= parseFloat(lngw) && parseFloat(map.getBounds().getNorthEast().lng()) <= parseFloat(lnge) && parseFloat(map.getBounds().getSouthWest().lat()) <= parseFloat(late) && parseFloat(map.getBounds().getNorthEast().lat()) >= parseFloat(late))) { this.flag1 = true; } } } if (this.flag1) { if (this.tileLayerOverlay1 == null && this.tileLayerOverlay11 == null) { this.tileLayerOverlay1 = this.addTileOverlay(NVG_PolygonRanhGioi_WdgMbnd.map, _pFile_wdgMbnd + '/final_1/{Z}_{X}_{Y}.png', 1.0); this.tileLayerOverlay11 = this.addTileOverlay(NVG_PolygonRanhGioi_WdgMbnd.map, _pFile_wdgMbnd + '/final_11/{Z}_{X}_{Y}.png', 1.0); this.tileLayerOverlay12 = this.addTileOverlay(NVG_PolygonRanhGioi_WdgMbnd.map, _pFile_wdgMbnd + '/final_12/{Z}_{X}_{Y}.png', 1.0); } if (this.tileLayerOverlay1 != null && this.tileLayerOverlay11 != null && this.tileLayerOverlay12 != null) { this.tileLayerOverlay1.show(); this.tileLayerOverlay11.show(); this.tileLayerOverlay12.show(); } } } }; NVG_PolygonRanhGioi_WdgMbnd.LoadMap(); if (plgrgWidgetMbnd.l.length > 0) { for (var i = 0; i < plgrgWidgetMbnd.l.length; i++) { NVG_PolygonRanhGioi_WdgMbnd.MakePolygon(plgrgWidgetMbnd.l[i].s1, plgrgWidgetMbnd.l[i].s2, plgrgWidgetMbnd.l[i].s3, i); } } else { NVG_PolygonRanhGioi_WdgMbnd.map.setCenter(new GLatLng(18.5052057, 102.779070), 5); } NVG_PolygonRanhGioi_WdgMbnd.check4GocChoTile(NVG_PolygonRanhGioi_WdgMbnd.map); NVG_PolygonRanhGioi_WdgMbnd.CheckBienDong();